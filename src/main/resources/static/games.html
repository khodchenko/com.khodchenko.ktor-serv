<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Games</title>
    <link rel="stylesheet" href="/static/style.css">
    <script src="/static/scripts.js" defer></script>
</head>
<body>
<div class="user-card" id="user-card">
    <img src="default-avatar.png" alt="Avatar">
    <div>
        <span class="username">Hello, Nickname</span>
        <span class="email">email@example.com</span>
        <span class="registration-date">Registered on: YYYY-MM-DD</span>
    </div>
    <button class="logout-button" onclick="logout()">Logout</button>
</div>
<div class="container">
    <button class="rooms-button" onclick="goToMainPage()">Go back to main page</button>
    <button class="rooms-button" onclick="goToRoomCreation()">Create room</button>
    <table>
        <thead>
        <tr>
            <th>Game Name</th>
            <th>Password</th>
            <th>Creation Date</th>
            <th>Player Count</th>
        </tr>
        </thead>
        <tbody id="games-table-body">
        <!-- Rows will be dynamically added here -->
        </tbody>
    </table>
</div>
<script>
    document.addEventListener('DOMContentLoaded', fetchGames);

    async function fetchGames() {
        try {
            const response = await fetch('/games-data');
            if (response.ok) {
                const games = await response.json();
                const tableBody = document.getElementById('games-table-body');
                tableBody.innerHTML = '';
                games.forEach(game => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${game.gameName}</td>
                        <td>${game.password}</td>
                        <td>${game.creationDate}</td>
                        <td>${game.playerCount}</td>
                    `;
                    tableBody.appendChild(row);
                });
            } else {
                console.error('Failed to fetch games data');
            }
        } catch (error) {
            console.error('Error fetching games data:', error);
        }
    }
</script>
</body>
</html>
